{"version":3,"sources":["../../test/MetaDataPlugin.spec.ts"],"names":["app","ArgdownApplication","describe","parserPlugin","ParserPlugin","modelPlugin","ModelPlugin","metaDataPlugin","MetaDataPlugin","addPlugin","it","source","request","process","input","logLevel","testBool","result","run","to","be","true","title","equal","parserErrors","length","lexerErrors","ast","metaData","author","frontMatter","list","sections","hello","statements","members","guten","prop1","prop2","arguments","myObject","name","auf"],"mappings":"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","sourcesContent":["import { expect } from \"chai\";\nimport { ArgdownApplication, ParserPlugin, ModelPlugin, MetaDataPlugin } from \"../src/index\";\nimport fs from \"fs\";\nimport { IMetaDataResponse } from \"../src/plugins/MetaDataPlugin\";\n\nlet app = new ArgdownApplication();\n\ndescribe(\"MetaDataPlugin\", function() {\n  const parserPlugin = new ParserPlugin();\n  const modelPlugin = new ModelPlugin();\n  const metaDataPlugin = new MetaDataPlugin();\n  app.addPlugin(parserPlugin, \"parse-input\");\n  app.addPlugin(metaDataPlugin, \"build-model\");\n  app.addPlugin(modelPlugin, \"build-model\");\n\n  it(\"can parse metadata\", function() {\n    const source = `\n===\nauthor: Christian Voigt\ntitle: My first front matter\nlist: [1,2,3,4]\ntestBool: true\n===\n\n# Heading 1 {hello: world}\n\n[A]: text {guten: tag}\n\n[A] {\n    prop1:\n        - 1\n        - 2\n        - 3\n    prop2:\n        a: 1\n        b: 2\n        c: 3\n    }\n\n<B>: text {myObject: {name: Klaus, list: [1,2,3]}}\n\n<B> {auf: wiedersehen}\n        `;\n    const request = { process: [\"parse-input\", \"build-model\"], input: source, logLevel: \"error\", testBool: false };\n    const result = app.run(request);\n    // console.log(JSON.stringify(request));\n    expect(request[\"testBool\"]).to.be.true;\n    expect((<any>request).title).to.equal(\"My first front matter\");\n    expect(result.parserErrors!.length).to.equal(0);\n    expect(result.lexerErrors!.length).to.equal(0);\n    expect(result.ast!.metaData.author).to.equal(\"Christian Voigt\");\n    expect(result.ast!.metaData.title).to.equal(\"My first front matter\");\n    expect((<IMetaDataResponse>result).frontMatter!.author).to.equal(\"Christian Voigt\");\n    expect((<IMetaDataResponse>result).frontMatter!.title).to.equal(\"My first front matter\");\n    expect((<IMetaDataResponse>result).frontMatter!.list.length).to.equal(4);\n    expect(result.sections![0].metaData.hello).to.equal(\"world\");\n    expect(result.statements![\"A\"].members[0].metaData.guten).to.equal(\"tag\");\n    expect(result.statements![\"A\"].metaData.guten).to.equal(\"tag\");\n    expect(result.statements![\"A\"].metaData.prop1.length).to.equal(3);\n    expect(result.statements![\"A\"].metaData.prop1[2]).to.equal(3);\n    expect(result.statements![\"A\"].metaData.prop2[\"c\"]).to.equal(3);\n    expect(result.arguments![\"B\"].metaData.myObject.name).to.equal(\"Klaus\");\n    expect(result.arguments![\"B\"].metaData.myObject.list[1]).to.equal(2);\n    expect(result.arguments![\"B\"].metaData.myObject.list.length).to.equal(3);\n    expect(result.arguments![\"B\"].metaData.auf).to.equal(\"wiedersehen\");\n  });\n});\n"],"file":"MetaDataPlugin.spec.js"}