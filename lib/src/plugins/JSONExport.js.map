{"version":3,"sources":["../../../src/plugins/JSONExport.js"],"names":["_","JSONExport","data","argdown","arguments","statements","relations","settings","exportMap","map","nodes","edges","$","json","JSON","stringify","key","value","removeEmbeddedRelations","undefined","spaces","config","defaults","name","module","exports"],"mappings":";;;;AAAA;;IAAYA,C;;AACZ;;AACA;;AACA;;;;;;IAEMC,U;;;wBASAC,I,EAAK;AACP,UAAMC,UAAU;AACdC,mBAAWF,KAAKE,SADF;AAEdC,oBAAYH,KAAKG,UAFH;AAGdC,mBAAWJ,KAAKI;AAHF,OAAhB;AAKA,UAAG,KAAKC,QAAL,CAAcC,SAAd,IAA2BN,KAAKO,GAAhC,IAAuCP,KAAKO,GAAL,CAASC,KAAhD,IAAyDR,KAAKO,GAAL,CAASE,KAArE,EAA2E;AACzER,gBAAQM,GAAR,GAAc;AACZC,iBAAOR,KAAKO,GAAL,CAASC,KADJ;AAEZC,iBAAOT,KAAKO,GAAL,CAASE;AAFJ,SAAd;AAID;AACD,UAAMC,IAAI,IAAV;AACAV,WAAKW,IAAL,GAAYC,KAAKC,SAAL,CAAeZ,OAAf,EAAwB,UAASa,GAAT,EAAcC,KAAd,EAAoB;AACtD,YAAGL,EAAEL,QAAF,CAAWW,uBAAX,IAAsCF,OAAO,WAA7C,KAA6D,sCAA4B,kDAAzF,CAAH,EAA8H;AAC5H,iBAAOG,SAAP;AACD,SAFD,MAEK;AACH,iBAAOF,KAAP;AACD;AACF,OANW,EAMT,KAAKV,QAAL,CAAca,MANL,CAAZ;AAOA,aAAOlB,IAAP;AACD;;;sBA7BUmB,M,EAAO;AAChB,WAAKd,QAAL,GAAgBP,EAAEsB,QAAF,CAAWD,UAAS,EAApB,EAAwB;AACtCD,gBAAS,CAD6B;AAEtCF,iCAAyB,KAFa;AAGtCV,mBAAY;AAH0B,OAAxB,CAAhB;AAKD;;;AAwBD,sBAAYa,MAAZ,EAAmB;AAAA;;AACjB,SAAKE,IAAL,GAAY,YAAZ;AACA,SAAKF,MAAL,GAAcA,MAAd;AACD;;;;;AAEHG,OAAOC,OAAP,GAAiB;AACfxB,cAAYA;AADG,CAAjB","file":"JSONExport.js","sourcesContent":["import * as _ from 'lodash';\nimport {Relation} from '../model/Relation.js';\nimport {Argument} from '../model/Argument.js';\nimport {EquivalenceClass} from '../model/EquivalenceClass.js';\n\nclass JSONExport{\n  set config(config){\n    this.settings = _.defaults(config ||{}, {\n      spaces : 2,\n      removeEmbeddedRelations: false,\n      exportMap : true\n    });\n  }\n  \n  run(data){\n    const argdown = {\n      arguments: data.arguments,\n      statements: data.statements,\n      relations: data.relations\n    };\n    if(this.settings.exportMap && data.map && data.map.nodes && data.map.edges){\n      argdown.map = {\n        nodes: data.map.nodes,\n        edges: data.map.edges\n      }\n    }\n    const $ = this;\n    data.json = JSON.stringify(argdown, function(key, value){\n      if($.settings.removeEmbeddedRelations && key == \"relations\" && (this instanceof Argument || this instanceof EquivalenceClass)){\n        return undefined;\n      }else{\n        return value;\n      }\n    }, this.settings.spaces);\n    return data;\n  }\n  constructor(config){\n    this.name = \"JSONExport\";\n    this.config = config;    \n  }\n}\nmodule.exports = {\n  JSONExport: JSONExport\n}\n"]}