{"version":3,"sources":["../../../src/plugins/JSONExport.js"],"names":["_","JSONExport","data","argdown","arguments","statements","relations","$","json","JSON","stringify","key","value","settings","removeEmbeddedRelations","EquivalenceClass","undefined","title","spaces","config","defaults","name","module","exports"],"mappings":";;;;AAAA;;IAAYA,C;;AACZ;;AACA;;AACA;;;;;;IAEMC,U;;;wBAQAC,I,EAAK;AACP,UAAMC,UAAU;AACdC,mBAAWF,KAAKE,SADF;AAEdC,oBAAYH,KAAKG,UAFH;AAGdC,mBAAWJ,KAAKI;AAHF,OAAhB;AAKA,UAAMC,IAAI,IAAV;AACAL,WAAKM,IAAL,GAAYC,KAAKC,SAAL,CAAeP,OAAf,EAAwB,UAASQ,GAAT,EAAcC,KAAd,EAAoB;AACtD,YAAGL,EAAEM,QAAF,CAAWC,uBAAX,IAAsCH,OAAO,WAA7C,KAA6D,sCAA4B,gBAAgBI,gBAAzG,CAAH,EAA8H;AAC5H,iBAAOC,SAAP;AACD;AACD,YAAG,kCAAH,EAA4B;AAC1B,cAAGJ,UAAUD,OAAO,MAAP,IAAiBA,OAAO,IAAlC,CAAH,EAA2C;AACzC,mBAAO,KAAKA,GAAL,EAAUM,KAAjB;AACD,WAFD,MAEK;AACH,mBAAOL,KAAP;AACD;AACF,SAND,MAMK;AACH,iBAAOA,KAAP;AACD;AACF,OAbW,EAaT,KAAKC,QAAL,CAAcK,MAbL,CAAZ;AAcA,aAAOhB,IAAP;AACD;;;sBA7BUiB,M,EAAO;AAChB,WAAKN,QAAL,GAAgBb,EAAEoB,QAAF,CAAWD,UAAS,EAApB,EAAwB;AACtCD,gBAAS,CAD6B;AAEtCJ,iCAAyB;AAFa,OAAxB,CAAhB;AAID;;;AAyBD,sBAAYK,MAAZ,EAAmB;AAAA;;AACjB,SAAKE,IAAL,GAAY,YAAZ;AACA,SAAKF,MAAL,GAAcA,MAAd;AACD;;;;;AAEHG,OAAOC,OAAP,GAAiB;AACftB,cAAYA;AADG,CAAjB","file":"JSONExport.js","sourcesContent":["import * as _ from 'lodash';\nimport {Relation} from '../model/Relation.js';\nimport {Argument} from '../model/Argument.js';\nimport {Statement} from '../model/EquivalenceClass.js';\n\nclass JSONExport{\n  set config(config){\n    this.settings = _.defaults(config ||{}, {\n      spaces : 2,\n      removeEmbeddedRelations: false\n    });\n  }\n  \n  run(data){\n    const argdown = {\n      arguments: data.arguments,\n      statements: data.statements,\n      relations: data.relations\n    };\n    const $ = this;\n    data.json = JSON.stringify(argdown, function(key, value){\n      if($.settings.removeEmbeddedRelations && key == \"relations\" && (this instanceof Argument || this instanceof EquivalenceClass)){\n        return undefined;\n      }\n      if(this instanceof Relation){\n        if(value && (key == \"from\" || key == \"to\")){\n          return this[key].title;\n        }else{\n          return value;\n        }\n      }else{\n        return value;\n      }\n    }, this.settings.spaces);\n    return data;\n  }\n  constructor(config){\n    this.name = \"JSONExport\";\n    this.config = config;    \n  }\n}\nmodule.exports = {\n  JSONExport: JSONExport\n}\n"]}