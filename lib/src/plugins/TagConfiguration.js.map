{"version":3,"sources":["../../../src/plugins/TagConfiguration.js"],"names":["_","TagConfiguration","config","previousSettings","settings","colorScheme","defaultsDeep","name","data","tags","tagColor","index","tag","tagData","color","length","module","exports"],"mappings":";;;;AAAA;;IAAYA,C;;;;;;IAENC,gB;;;sBACOC,M,EAAO;AAChB,UAAIC,mBAAmB,KAAKC,QAA5B;AACA,UAAG,CAACD,gBAAJ,EAAqB;AACnBA,2BAAmB;AACjB;AACAE,uBAAa,CAAC,SAAD,EAAW,SAAX,EAAqB,SAArB,EAA+B,SAA/B,EAAyC,SAAzC,EAAmD,SAAnD,EAA6D,SAA7D,EAAuE,SAAvE,EAAiF,SAAjF,EAA2F,SAA3F,EAAqG,SAArG,EAA+G,SAA/G;AAFI,SAAnB;AAID;AACD,WAAKD,QAAL,GAAgBJ,EAAEM,YAAF,CAAe,EAAf,EAAmBJ,MAAnB,EAA2BC,gBAA3B,CAAhB;AACD;;;AACD,4BAAYD,MAAZ,EAAmB;AAAA;;AACjB,SAAKK,IAAL,GAAY,kBAAZ;AACA,SAAKL,MAAL,GAAcA,MAAd;AACD;;;;wBACGM,I,EAAK;AACP,UAAG,CAACA,KAAKC,IAAT,EAAc;AACZ;AACD;AACDD,WAAKN,MAAL,GAAcM,KAAKN,MAAL,IAAc,EAA5B;AACAM,WAAKN,MAAL,CAAYO,IAAZ,GAAmBD,KAAKN,MAAL,CAAYO,IAAZ,IAAmB,EAAtC;AACA,WAAKP,MAAL,GAAcM,KAAKN,MAAL,CAAYQ,QAA1B;AACA,UAAIC,QAAQ,CAAZ;AAPO;AAAA;AAAA;;AAAA;AAQP,6BAAeH,KAAKC,IAApB,8HAAyB;AAAA,cAAjBG,GAAiB;;AACvB,cAAMC,UAAUL,KAAKN,MAAL,CAAYO,IAAZ,CAAiBG,GAAjB,KAAuB,EAAvC;AACAJ,eAAKN,MAAL,CAAYO,IAAZ,CAAiBG,GAAjB,IAAwBC,OAAxB;AACA,cAAG,CAACA,QAAQC,KAAT,IAAkBH,QAAQ,KAAKP,QAAL,CAAcC,WAAd,CAA0BU,MAAvD,EAA8D;AAC5DF,oBAAQC,KAAR,GAAgB,KAAKV,QAAL,CAAcC,WAAd,CAA0BM,KAA1B,CAAhB;AACD;AACDE,kBAAQF,KAAR,GAAgBA,KAAhB;AACAA;AACD;AAhBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBR;;;;;;AAEHK,OAAOC,OAAP,GAAiB;AACfhB,oBAAkBA;AADH,CAAjB","file":"TagConfiguration.js","sourcesContent":["import * as _ from 'lodash';\n\nclass TagConfiguration{\n  set config(config){\n    let previousSettings = this.settings;\n    if(!previousSettings){\n      previousSettings = {\n        //default colorScheme taken from ColorBrewer Paired: https://bl.ocks.org/mbostock/5577023\n        colorScheme: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\",\"#ffff99\",\"#b15928\"]\n      }\n    }\n    this.settings = _.defaultsDeep({}, config, previousSettings);    \n  }\n  constructor(config){\n    this.name = \"TagConfiguration\";\n    this.config = config;\n  }\n  run(data){\n    if(!data.tags){\n      return;\n    }\n    data.config = data.config ||{};\n    data.config.tags = data.config.tags ||{};\n    this.config = data.config.tagColor;\n    let index = 0;\n    for(let tag of data.tags){\n      const tagData = data.config.tags[tag]||{};\n      data.config.tags[tag] = tagData;\n      if(!tagData.color && index < this.settings.colorScheme.length){\n        tagData.color = this.settings.colorScheme[index];\n      }\n      tagData.index = index;\n      index++;\n    }\n  }\n}\nmodule.exports = {\n  TagConfiguration: TagConfiguration\n}\n"]}