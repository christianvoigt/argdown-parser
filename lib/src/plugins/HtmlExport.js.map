{"version":3,"sources":["../../../src/plugins/HtmlExport.js"],"names":["_","HtmlExport","request","settings","name","defaultsDeep","getSettings","defaults","config","headless","cssFile","title","lang","charset","$","argdownListeners","argdownEntry","response","html","htmlIds","head","argdownExit","statementEntry","node","classes","equivalenceClass","tags","getCssClassesFromTags","sortedTags","statementExit","StatementDefinitionEntry","parentNode","htmlId","getHtmlId","statement","escapeHtml","StatementReferenceEntry","StatementMentionEntry","statements","trailingWhitespace","argumentReferenceEntry","argument","argumentDefinitionEntry","ArgumentMentionEntry","arguments","argumentDefinitionExit","incomingSupportEntry","incomingSupportExit","incomingAttackEntry","incomingAttackExit","incomingUndercutEntry","incomingUndercutExit","outgoingSupportEntry","outgoingSupportExit","outgoingAttackEntry","outgoingAttackExit","outgoingUndercutEntry","outgoingUndercutExit","contradictionEntry","contradictionExit","relationsEntry","relationsExit","orderedListEntry","orderedListExit","unorderedListEntry","unorderedListExit","orderedListItemEntry","orderedListItemExit","unorderedListItemEntry","unorderedListItemExit","headingEntry","level","replace","text","headingExit","freestyleTextEntry","boldEntry","boldExit","italicEntry","italicExit","LinkEntry","url","TagEntry","tag","argumentEntry","argumentExit","argumentStatementEntry","role","inference","metadataKeys","Object","keys","metaData","length","inferenceRules","i","inferenceRule","key","isString","j","value","statementNr","argumentStatementExit","type","ignoreDuplicates","id","originalId","tagsDictionary","index","tagData","cssClass","str","find","RegExp","unsafe","module","exports"],"mappings":";;;;AAAA;;IAAYA,C;;AACZ;;;;;;;;;;IAEMC,U;;;oCACUC,O,EAAS;AACjB,gBAAIC,WAAWD,QAAQ,MAAR,KAAmBA,QAAQ,KAAKE,IAAb,CAAlC;AACA,gBAAI,CAACD,QAAL,EAAe;AACXA,2BAAW,EAAX;AACAD,wBAAQ,MAAR,IAAkBC,QAAlB;AACH;AACD,mBAAOA,QAAP;AACH;;;gCACOD,O,EAAS;AACbF,cAAEK,YAAF,CAAe,KAAKC,WAAL,CAAiBJ,OAAjB,CAAf,EAA0C,KAAKK,QAA/C;AACH;;;AACD,wBAAYC,MAAZ,EAAoB;AAAA;;AAChB,aAAKJ,IAAL,GAAY,YAAZ;AACA,aAAKG,QAAL,GAAgBP,EAAEK,YAAF,CAAe,EAAf,EAAmBG,MAAnB,EAA2B;AACvCC,sBAAU,KAD6B;AAEvCC,qBAAS,eAF8B;AAGvCC,mBAAO,kBAHgC;AAIvCC,kBAAM,IAJiC;AAKvCC,qBAAS;AAL8B,SAA3B,CAAhB;AAOA,YAAIC,IAAI,IAAR;AACA,aAAKC,gBAAL,GAAwB;AACpBC,0BAAc,sBAACd,OAAD,EAAUe,QAAV,EAAuB;AACjCA,yBAASC,IAAT,GAAgB,EAAhB;AACAD,yBAASE,OAAT,GAAmB,EAAnB;AACA,oBAAIhB,WAAWW,EAAER,WAAF,CAAcJ,OAAd,CAAf;AACA,oBAAI,CAACC,SAASM,QAAd,EAAwB;AACpB,wBAAIW,OAAOjB,SAASiB,IAApB;AACA,wBAAI,CAACA,IAAL,EAAW;AACPA,+BACI,wBACA,cADA,GAEAjB,SAASS,IAFT,GAGA,MAHA,GAIA,UAJA,GAKA,iBALA,GAMAT,SAASU,OANT,GAOA,MAPA,GAQA,SARA,GASAV,SAASQ,KATT,GAUA,YAXJ;AAYA,4BAAIR,SAASO,OAAb,EAAsB;AAClBU,oCAAQ,kCAAkCjB,SAASO,OAA3C,GAAqD,MAA7D;AACH;AACDU,gCAAQ,SAAR;AACH;AACDH,6BAASC,IAAT,IAAiBE,IAAjB;AACAH,6BAASC,IAAT,IAAiB,QAAjB;AACH;AACDD,yBAASC,IAAT,IAAiB,uBAAjB;AACH,aA7BmB;AA8BpBG,yBAAa,qBAACnB,OAAD,EAAUe,QAAV,EAAuB;AAChC,oBAAId,WAAWW,EAAER,WAAF,CAAcJ,OAAd,CAAf;AACAe,yBAASC,IAAT,IAAiB,QAAjB;AACA,oBAAI,CAACf,SAASM,QAAd,EAAwB;AACpBQ,6BAASC,IAAT,IAAiB,gBAAjB;AACH;AACJ,aApCmB;AAqCpBI,4BAAgB,wBAACpB,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AACzC,oBAAIC,UAAU,WAAd;AACA,oBAAID,KAAKE,gBAAL,CAAsBC,IAA1B,EAAgC;AAC5BF,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCM,KAAKE,gBAAL,CAAsBG,UAAxD,CAAjB;AACH;AACDX,yBAASC,IAAT,IAAiB,iBAAiBM,OAAjB,GAA2B,IAA5C;AACH,aA3CmB;AA4CpBK,2BAAe,uBAAC3B,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,QAAzC;AAAA,aA5CK;AA6CpBY,sCAA0B,kCAAC5B,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA0BQ,UAA1B,EAAyC;AAC/D,oBAAIC,SAASlB,EAAEmB,SAAF,CAAYhB,QAAZ,EAAsB,WAAtB,EAAmCM,KAAKW,SAAL,CAAevB,KAAlD,CAAb;AACAM,yBAASE,OAAT,CAAiBa,MAAjB,IAA2BT,KAAKW,SAAhC;AACA,oBAAIV,UAAU,6CAAd;AACA,oBAAIO,WAAWN,gBAAX,IAA+BM,WAAWN,gBAAX,CAA4BG,UAA/D,EAA2E;AACvEJ,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCc,WAAWN,gBAAX,CAA4BG,UAA9D,CAAjB;AACH;AACDX,yBAASC,IAAT,IACI,eACAc,MADA,GAEA,WAFA,GAGAR,OAHA,GAIA,yCAJA,GAKAV,EAAEqB,UAAF,CAAaZ,KAAKW,SAAL,CAAevB,KAA5B,CALA,GAMA,mBAPJ;AAQH,aA5DmB;AA6DpByB,qCAAyB,iCAAClC,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA0BQ,UAA1B,EAAyC;AAC9D,oBAAIC,SAASlB,EAAEmB,SAAF,CAAYhB,QAAZ,EAAsB,WAAtB,EAAmCM,KAAKW,SAAL,CAAevB,KAAlD,EAAyD,IAAzD,CAAb;AACA,oBAAIa,UAAU,+BAAd;AACA,oBAAIO,WAAWN,gBAAX,IAA+BM,WAAWN,gBAAX,CAA4BG,UAA/D,EAA2E;AACvEJ,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCc,WAAWN,gBAAX,CAA4BG,UAA9D,CAAjB;AACH;AACDX,yBAASC,IAAT,IACI,eACAc,MADA,GAEA,WAFA,GAGAR,OAHA,GAIA,yCAJA,GAKAV,EAAEqB,UAAF,CAAaZ,KAAKW,SAAL,CAAevB,KAA5B,CALA,GAMA,eAPJ;AAQH,aA3EmB;AA4EpB0B,mCAAuB,+BAACnC,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AAChD,oBAAME,mBAAmBR,SAASqB,UAAT,CAAoBf,KAAKZ,KAAzB,CAAzB;AACA,oBAAIa,UAAU,2BAAd;AACA,oBAAIC,iBAAiBG,UAArB,EAAiC;AAC7BJ,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCQ,iBAAiBG,UAAnD,CAAjB;AACH;AACD,oBAAII,SAASlB,EAAEmB,SAAF,CAAYhB,QAAZ,EAAsB,WAAtB,EAAmCM,KAAKZ,KAAxC,EAA+C,IAA/C,CAAb;AACAM,yBAASC,IAAT,IACI,eACAc,MADA,GAEA,WAFA,GAGAR,OAHA,GAIA,0CAJA,GAKAV,EAAEqB,UAAF,CAAaZ,KAAKZ,KAAlB,CALA,GAMA,cANA,GAOAY,KAAKgB,kBART;AASH,aA5FmB;AA6FpBC,oCAAwB,gCAACtC,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AACjD,oBAAIS,SAASlB,EAAEmB,SAAF,CAAYhB,QAAZ,EAAsB,UAAtB,EAAkCM,KAAKkB,QAAL,CAAc9B,KAAhD,EAAuD,IAAvD,CAAb;AACA,oBAAIa,UAAU,8BAAd;AACA,oBAAID,KAAKkB,QAAL,CAAcf,IAAlB,EAAwB;AACpBF,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCM,KAAKkB,QAAL,CAAcb,UAAhD,CAAjB;AACH;AACDX,yBAASC,IAAT,IACI,eACAc,MADA,GAEA,WAFA,GAGAR,OAHA,GAIA,2CAJA,GAKAV,EAAEqB,UAAF,CAAaZ,KAAKkB,QAAL,CAAc9B,KAA3B,CALA,GAMA,kBAPJ;AAQH,aA3GmB;AA4GpB+B,qCAAyB,iCAACxC,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AAClD,oBAAIS,SAASlB,EAAEmB,SAAF,CAAYhB,QAAZ,EAAsB,UAAtB,EAAkCM,KAAKkB,QAAL,CAAc9B,KAAhD,CAAb;AACAM,yBAASE,OAAT,CAAiBa,MAAjB,IAA2BT,KAAKkB,QAAhC;AACA,oBAAIjB,UAAU,gCAAd;AACA,oBAAID,KAAKkB,QAAL,CAAcf,IAAlB,EAAwB;AACpBF,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCM,KAAKkB,QAAL,CAAcb,UAAhD,CAAjB;AACH;AACDX,yBAASC,IAAT,IACI,cACAc,MADA,GAEA,WAFA,GAGAR,OAHA,GAIA,0FAJA,GAKAV,EAAEqB,UAAF,CAAaZ,KAAKkB,QAAL,CAAc9B,KAA3B,CALA,GAMA,6EAPJ;AAQH,aA3HmB;AA4HpBgC,kCAAsB,8BAACzC,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AAC/C,oBAAIS,SAASlB,EAAEmB,SAAF,CAAYhB,QAAZ,EAAsB,UAAtB,EAAkCM,KAAKZ,KAAvC,EAA8C,IAA9C,CAAb;AACA,oBAAIa,UAAU,0BAAd;AACA,oBAAMiB,WAAWxB,SAAS2B,SAAT,CAAmBrB,KAAKZ,KAAxB,CAAjB;AACA,oBAAI8B,SAASf,IAAb,EAAmB;AACfF,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCwB,SAASb,UAA3C,CAAjB;AACH;AACDX,yBAASC,IAAT,IACI,eACAc,MADA,GAEA,WAFA,GAGAR,OAHA,GAIA,4CAJA,GAKAV,EAAEqB,UAAF,CAAaZ,KAAKZ,KAAlB,CALA,GAMA,iBANA,GAOAY,KAAKgB,kBART;AASH,aA5ImB;AA6IpBM,oCAAwB,gCAAC3C,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,eAAzC;AAAA,aA7IJ;AA8IpB4B,kCAAsB,8BAAC5C,OAAD,EAAUe,QAAV,EAAuB;AACzCA,yBAASC,IAAT,IACI,+GADJ;AAEH,aAjJmB;AAkJpB6B,iCAAqB,6BAAC7C,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,QAAzC;AAAA,aAlJD;AAmJpB8B,iCAAqB,6BAAC9C,OAAD,EAAUe,QAAV,EAAuB;AACxCA,yBAASC,IAAT,IACI,6GADJ;AAEH,aAtJmB;AAuJpB+B,gCAAoB,4BAAC/C,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,QAAzC;AAAA,aAvJA;AAwJpBgC,mCAAuB,+BAAChD,OAAD,EAAUe,QAAV,EAAuB;AAC1CA,yBAASC,IAAT,IACI,iHADJ;AAEH,aA3JmB;AA4JpBiC,kCAAsB,8BAACjD,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,QAAzC;AAAA,aA5JF;AA6JpBkC,kCAAsB,8BAAClD,OAAD,EAAUe,QAAV,EAAuB;AACzCA,yBAASC,IAAT,IACI,2GADJ;AAEH,aAhKmB;AAiKpBmC,iCAAqB,6BAACnD,OAAD,EAAUe,QAAV,EAAuB;AACxCA,yBAASC,IAAT,IAAiB,QAAjB;AACH,aAnKmB;AAoKpBoC,iCAAqB,6BAACpD,OAAD,EAAUe,QAAV,EAAuB;AACxCA,yBAASC,IAAT,IACI,yGADJ;AAEH,aAvKmB;AAwKpBqC,gCAAoB,4BAACrD,OAAD,EAAUe,QAAV,EAAuB;AACvCA,yBAASC,IAAT,IAAiB,QAAjB;AACH,aA1KmB;AA2KpBsC,mCAAuB,+BAACtD,OAAD,EAAUe,QAAV,EAAuB;AAC1CA,yBAASC,IAAT,IACI,iHADJ;AAEH,aA9KmB;AA+KpBuC,kCAAsB,8BAACvD,OAAD,EAAUe,QAAV,EAAuB;AACzCA,yBAASC,IAAT,IAAiB,QAAjB;AACH,aAjLmB;AAkLpBwC,gCAAoB,4BAACxD,OAAD,EAAUe,QAAV,EAAuB;AACvCA,yBAASC,IAAT,IACI,4GADJ;AAEH,aArLmB;AAsLpByC,+BAAmB,2BAACzD,OAAD,EAAUe,QAAV,EAAuB;AACtCA,yBAASC,IAAT,IAAiB,QAAjB;AACH,aAxLmB;AAyLpB0C,4BAAgB,wBAAC1D,OAAD,EAAUe,QAAV,EAAuB;AACnCA,yBAASC,IAAT,IAAiB,yBAAjB;AACH,aA3LmB;AA4LpB2C,2BAAe,uBAAC3D,OAAD,EAAUe,QAAV,EAAuB;AAClCA,yBAASC,IAAT,IAAiB,QAAjB;AACH,aA9LmB;AA+LpB4C,8BAAkB,0BAAC5D,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,MAAzC;AAAA,aA/LE;AAgMpB6C,6BAAiB,yBAAC7D,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,OAAzC;AAAA,aAhMG;AAiMpB8C,gCAAoB,4BAAC9D,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,MAAzC;AAAA,aAjMA;AAkMpB+C,+BAAmB,2BAAC/D,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,OAAzC;AAAA,aAlMC;AAmMpBgD,kCAAsB,8BAAChE,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,MAAzC;AAAA,aAnMF;AAoMpBiD,iCAAqB,6BAACjE,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,OAAzC;AAAA,aApMD;AAqMpBkD,oCAAwB,gCAAClE,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,MAAzC;AAAA,aArMJ;AAsMpBmD,mCAAuB,+BAACnE,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,OAAzC;AAAA,aAtMH;AAuMpBoD,0BAAc,sBAACpE,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AACvC,oBAAIpB,WAAWW,EAAER,WAAF,CAAcJ,OAAd,CAAf;AACA,oBAAIqB,KAAKgD,KAAL,IAAc,CAAlB,EAAqB;AACjB,wBAAIpE,SAASQ,KAAT,IAAkB,kBAAtB,EAA0C;AACtCM,iCAASC,IAAT,GAAgBD,SAASC,IAAT,CAAcsD,OAAd,CACZ,iCADY,EAEZ,YAAY1D,EAAEqB,UAAF,CAAaZ,KAAKkD,IAAlB,CAAZ,GAAsC,UAF1B,CAAhB;AAIH;AACJ;AACD,oBAAIzC,SAASlB,EAAEmB,SAAF,CAAYhB,QAAZ,EAAsB,SAAtB,EAAiCM,KAAKkD,IAAtC,CAAb;AACAxD,yBAASE,OAAT,CAAiBa,MAAjB,IAA2BT,IAA3B;AACAN,yBAASC,IAAT,IAAiB,OAAOK,KAAKgD,KAAZ,GAAoB,OAApB,GAA8BvC,MAA9B,GAAuC,IAAxD;AACH,aApNmB;AAqNpB0C,yBAAa,qBAACxE,OAAD,EAAUe,QAAV,EAAoBM,IAApB;AAAA,uBAA8BN,SAASC,IAAT,IAAiB,QAAQK,KAAKgD,KAAb,GAAqB,GAApE;AAAA,aArNO;AAsNpBI,gCAAoB,4BAACzE,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA0BQ,UAA1B,EAAyC;AACzD,oBAAIA,WAAW3B,IAAX,IAAmB,gBAAnB,IAAuC2B,WAAW3B,IAAX,IAAmB,mBAA9D,EAAmF;AAC/Ea,6BAASC,IAAT,IAAiBJ,EAAEqB,UAAF,CAAaZ,KAAKkD,IAAlB,CAAjB;AACH;AACJ,aA1NmB;AA2NpBG,uBAAW,mBAAC1E,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,KAAzC;AAAA,aA3NS;AA4NpB2D,sBAAU,kBAAC3E,OAAD,EAAUe,QAAV,EAAoBM,IAApB;AAAA,uBAA8BN,SAASC,IAAT,IAAiB,SAASK,KAAKgB,kBAA7D;AAAA,aA5NU;AA6NpBuC,yBAAa,qBAAC5E,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,KAAzC;AAAA,aA7NO;AA8NpB6D,wBAAY,oBAAC7E,OAAD,EAAUe,QAAV,EAAoBM,IAApB;AAAA,uBAA8BN,SAASC,IAAT,IAAiB,SAASK,KAAKgB,kBAA7D;AAAA,aA9NQ;AA+NpByC,uBAAW,mBAAC9E,OAAD,EAAUe,QAAV,EAAoBM,IAApB;AAAA,uBACNN,SAASC,IAAT,IAAiB,cAAcK,KAAK0D,GAAnB,GAAyB,IAAzB,GAAgC1D,KAAKkD,IAArC,GAA4C,MAA5C,GAAqDlD,KAAKgB,kBADrE;AAAA,aA/NS;AAiOpB2C,sBAAU,kBAAChF,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AACnC,oBAAIA,KAAKkD,IAAT,EAAe;AACXxD,6BAASC,IAAT,IACI,sBACAJ,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkC,CAACM,KAAK4D,GAAN,CAAlC,CADA,GAEA,IAFA,GAGArE,EAAEqB,UAAF,CAAaZ,KAAKkD,IAAlB,CAHA,GAIA,SALJ;AAMH;AACJ,aA1OmB;AA2OpBW,2BAAe,uBAAClF,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AACxC,oBAAIC,UAAU,UAAd;AACA,oBAAID,KAAKkB,QAAL,CAAcf,IAAlB,EAAwB;AACpBF,+BAAW,MAAMV,EAAEa,qBAAF,CAAwBV,QAAxB,EAAkCM,KAAKkB,QAAL,CAAcb,UAAhD,CAAjB;AACH;AACDX,yBAASC,IAAT,IAAiB,iBAAiBM,OAAjB,GAA2B,IAA5C;AACH,aAjPmB;AAkPpB6D,0BAAc,sBAACnF,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,QAAzC;AAAA,aAlPM;AAmPpBoE,oCAAwB,gCAACpF,OAAD,EAAUe,QAAV,EAAoBM,IAApB,EAA6B;AACjD,oBAAIA,KAAKW,SAAL,CAAeqD,IAAf,IAAuB,YAA3B,EAAyC;AACrC,wBAAIC,YAAYjE,KAAKW,SAAL,CAAesD,SAA/B;AACA,wBAAIC,eAAeC,OAAOC,IAAP,CAAYH,UAAUI,QAAtB,CAAnB;AACA,wBAAIH,aAAaI,MAAb,IAAuB,CAAvB,IAA4BL,UAAUM,cAAV,CAAyBD,MAAzB,IAAmC,CAAnE,EAAsE;AAClE5E,iCAASC,IAAT,IAAiB,yBAAjB;AACH,qBAFD,MAEO;AACHD,iCAASC,IAAT,IAAiB,mCAAjB;AACH;;AAEDD,6BAASC,IAAT,IAAiB,gCAAjB;AACA,wBAAIsE,UAAUM,cAAV,CAAyBD,MAAzB,GAAkC,CAAtC,EAAyC;AACrC,4BAAIE,IAAI,CAAR;AADqC;AAAA;AAAA;;AAAA;AAErC,iDAA0BP,UAAUM,cAApC,8HAAoD;AAAA,oCAA3CE,aAA2C;;AAChD,oCAAID,IAAI,CAAR,EAAW9E,SAASC,IAAT,IAAiB,IAAjB;AACXD,yCAASC,IAAT,IAAiB,kCAAkC8E,aAAlC,GAAkD,SAAnE;AACAD;AACH;AANoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOrC9E,iCAASC,IAAT,IAAiB,UAAjB;AACH;AACD,wBAAIuE,aAAaI,MAAb,GAAsB,CAA1B,EAA6B;AACzB5E,iCAASC,IAAT,IAAiB,0BAAjB;AACA,6BAAK,IAAI6E,KAAI,CAAb,EAAgBA,KAAIN,aAAaI,MAAjC,EAAyCE,IAAzC,EAA8C;AAC1C,gCAAIE,MAAMR,aAAaM,EAAb,CAAV;AACA9E,qCAASC,IAAT,IAAiB,oCAAjB;AACAD,qCAASC,IAAT,IAAiB,iCAAiC+E,GAAjC,GAAuC,WAAxD;AACA,gCAAIjG,EAAEkG,QAAF,CAAWV,UAAUI,QAAV,CAAmBK,GAAnB,CAAX,CAAJ,EAAyC;AACrChF,yCAASC,IAAT,IACI,mCACAJ,EAAEqB,UAAF,CAAaqD,UAAUI,QAAV,CAAmBK,GAAnB,CAAb,CADA,GAEA,SAHJ;AAIH,6BALD,MAKO;AACH,oCAAIE,IAAI,CAAR;AADG;AAAA;AAAA;;AAAA;AAEH,0DAAkBX,UAAUI,QAAV,CAAmBK,GAAnB,CAAlB,mIAA2C;AAAA,4CAAlCG,KAAkC;;AACvC,4CAAID,IAAI,CAAR,EAAWlF,SAASC,IAAT,IAAiB,IAAjB;AACXD,iDAASC,IAAT,IAAiB,mCAAmCJ,EAAEqB,UAAF,CAAaiE,KAAb,CAAnC,GAAyD,SAA1E;AACAD;AACH;AANE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAON;AACD,gCAAIJ,KAAIN,aAAaI,MAAb,GAAsB,CAA9B,EAAiC5E,SAASC,IAAT,IAAiB,IAAjB;AACjCD,qCAASC,IAAT,IAAiB,SAAjB;AACH;AACDD,iCAASC,IAAT,IAAiB,WAAjB;AACH;;AAEDD,6BAASC,IAAT,IAAiB,QAAjB;AACH;AACDD,yBAASC,IAAT,IACI,iBACAK,KAAKW,SAAL,CAAeqD,IADf,GAEA,wDAFA,GAGAhE,KAAK8E,WAHL,GAIA,gBALJ;AAMH,aAxSmB;AAySpBC,mCAAuB,+BAACpG,OAAD,EAAUe,QAAV;AAAA,uBAAwBA,SAASC,IAAT,IAAiB,QAAzC;AAAA;AAzSH,SAAxB;AA2SH;;;;kCACSD,Q,EAAUsF,I,EAAM5F,K,EAAO6F,gB,EAAkB;AAC/C,gBAAIC,KAAKF,OAAO,GAAP,GAAa5F,KAAtB;AACA8F,iBAAK,eAAKxE,SAAL,CAAewE,EAAf,CAAL;AACA,gBAAI,CAACD,gBAAL,EAAuB;AACnB,oBAAIE,aAAaD,EAAjB;AACA,oBAAIV,IAAI,CAAR;AACA,uBAAO9E,SAASE,OAAT,IAAoBF,SAASE,OAAT,CAAiBsF,EAAjB,CAA3B,EAAiD;AAC7CV;AACAU,yBAAKC,aAAa,cAAb,GAA8BX,CAAnC;AACH;AACJ;AACD,mBAAOU,EAAP;AACH;;;8CACqBxF,Q,EAAUS,I,EAAM;AAClC,gBAAIF,UAAU,EAAd;AACA,gBAAI,CAACE,IAAD,IAAS,CAACT,SAAS0F,cAAvB,EAAuC;AACnC,uBAAOnF,OAAP;AACH;AACD,gBAAIoF,QAAQ,CAAZ;AALkC;AAAA;AAAA;;AAAA;AAMlC,sCAAgBlF,IAAhB,mIAAsB;AAAA,wBAAbyD,GAAa;;AAClB,wBAAIyB,QAAQ,CAAZ,EAAe;AACXpF,mCAAW,GAAX;AACH;AACDoF;AACA,wBAAMC,UAAU5F,SAAS0F,cAAT,CAAwBxB,GAAxB,CAAhB;AACA3D,+BAAWqF,QAAQC,QAAnB;AACH;AAbiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAclC,mBAAOtF,OAAP;AACH;;;mCACUuF,G,EAAKC,I,EAAMxC,O,EAAS;AAC3B,mBAAOuC,IAAIvC,OAAJ,CAAY,IAAIyC,MAAJ,CAAWD,IAAX,EAAiB,GAAjB,CAAZ,EAAmCxC,OAAnC,CAAP;AACH;;;mCACU0C,M,EAAQ;AACf,mBAAOA,OACF1C,OADE,CACM,IADN,EACY,OADZ,EAEFA,OAFE,CAEM,IAFN,EAEY,MAFZ,EAGFA,OAHE,CAGM,IAHN,EAGY,MAHZ,EAIFA,OAJE,CAIM,IAJN,EAIY,QAJZ,EAKFA,OALE,CAKM,IALN,EAKY,QALZ,CAAP;AAMH;;;qCACYuC,G,EAAK;AACd,mBAAOA,IAAIvC,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAP;AACH;;;;;;AAEL2C,OAAOC,OAAP,GAAiB;AACbnH,gBAAYA;AADC,CAAjB","file":"HtmlExport.js","sourcesContent":["import * as _ from \"lodash\";\nimport util from \"./util.js\";\n\nclass HtmlExport {\n    getSettings(request) {\n        let settings = request[\"html\"] || request[this.name];\n        if (!settings) {\n            settings = {};\n            request[\"html\"] = settings;\n        }\n        return settings;\n    }\n    prepare(request) {\n        _.defaultsDeep(this.getSettings(request), this.defaults);\n    }\n    constructor(config) {\n        this.name = \"HtmlExport\";\n        this.defaults = _.defaultsDeep({}, config, {\n            headless: false,\n            cssFile: \"./argdown.css\",\n            title: \"Argdown Document\",\n            lang: \"en\",\n            charset: \"utf8\"\n        });\n        let $ = this;\n        this.argdownListeners = {\n            argdownEntry: (request, response) => {\n                response.html = \"\";\n                response.htmlIds = {};\n                let settings = $.getSettings(request);\n                if (!settings.headless) {\n                    let head = settings.head;\n                    if (!head) {\n                        head =\n                            \"<!doctype html>\\n\\n\" +\n                            \"<html lang='\" +\n                            settings.lang +\n                            \"'>\\n\" +\n                            \"<head>\\n\" +\n                            \"<meta charset='\" +\n                            settings.charset +\n                            \"'>\\n\" +\n                            \"<title>\" +\n                            settings.title +\n                            \"</title>\\n\";\n                        if (settings.cssFile) {\n                            head += \"<link rel='stylesheet' href='\" + settings.cssFile + \"'>\\n\";\n                        }\n                        head += \"</head>\";\n                    }\n                    response.html += head;\n                    response.html += \"<body>\";\n                }\n                response.html += \"<div class='argdown'>\";\n            },\n            argdownExit: (request, response) => {\n                let settings = $.getSettings(request);\n                response.html += \"</div>\";\n                if (!settings.headless) {\n                    response.html += \"</body></html>\";\n                }\n            },\n            statementEntry: (request, response, node) => {\n                let classes = \"statement\";\n                if (node.equivalenceClass.tags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, node.equivalenceClass.sortedTags);\n                }\n                response.html += \"<div class='\" + classes + \"'>\";\n            },\n            statementExit: (request, response) => (response.html += \"</div>\"),\n            StatementDefinitionEntry: (request, response, node, parentNode) => {\n                let htmlId = $.getHtmlId(response, \"statement\", node.statement.title);\n                response.htmlIds[htmlId] = node.statement;\n                let classes = \"definition statement-definition definiendum\";\n                if (parentNode.equivalenceClass && parentNode.equivalenceClass.sortedTags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, parentNode.equivalenceClass.sortedTags);\n                }\n                response.html +=\n                    \"<span id='\" +\n                    htmlId +\n                    \"' class='\" +\n                    classes +\n                    \"'>[<span class='title statement-title'>\" +\n                    $.escapeHtml(node.statement.title) +\n                    \"</span>]: </span>\";\n            },\n            StatementReferenceEntry: (request, response, node, parentNode) => {\n                let htmlId = $.getHtmlId(response, \"statement\", node.statement.title, true);\n                let classes = \"reference statement-reference\";\n                if (parentNode.equivalenceClass && parentNode.equivalenceClass.sortedTags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, parentNode.equivalenceClass.sortedTags);\n                }\n                response.html +=\n                    \"<a href='#\" +\n                    htmlId +\n                    \"' class='\" +\n                    classes +\n                    \"'>[<span class='title statement-title'>\" +\n                    $.escapeHtml(node.statement.title) +\n                    \"</span>] </a>\";\n            },\n            StatementMentionEntry: (request, response, node) => {\n                const equivalenceClass = response.statements[node.title];\n                let classes = \"mention statement-mention\";\n                if (equivalenceClass.sortedTags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, equivalenceClass.sortedTags);\n                }\n                let htmlId = $.getHtmlId(response, \"statement\", node.title, true);\n                response.html +=\n                    \"<a href='#\" +\n                    htmlId +\n                    \"' class='\" +\n                    classes +\n                    \"'>@[<span class='title statement-title'>\" +\n                    $.escapeHtml(node.title) +\n                    \"</span>]</a>\" +\n                    node.trailingWhitespace;\n            },\n            argumentReferenceEntry: (request, response, node) => {\n                let htmlId = $.getHtmlId(response, \"argument\", node.argument.title, true);\n                let classes = \"reference argument-reference\";\n                if (node.argument.tags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, node.argument.sortedTags);\n                }\n                response.html +=\n                    \"<a href='#\" +\n                    htmlId +\n                    \"' class='\" +\n                    classes +\n                    \"'>&lt;<span class='title argument-title'>\" +\n                    $.escapeHtml(node.argument.title) +\n                    \"</span>&gt; </a>\";\n            },\n            argumentDefinitionEntry: (request, response, node) => {\n                let htmlId = $.getHtmlId(response, \"argument\", node.argument.title);\n                response.htmlIds[htmlId] = node.argument;\n                let classes = \"definition argument-definition\";\n                if (node.argument.tags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, node.argument.sortedTags);\n                }\n                response.html +=\n                    \"<div id='\" +\n                    htmlId +\n                    \"' class='\" +\n                    classes +\n                    \"'><span class='definiendum argument-definiendum'>&lt;<span class='title argument-title'>\" +\n                    $.escapeHtml(node.argument.title) +\n                    \"</span>&gt;: </span><span class='argument-definiens definiens description'>\";\n            },\n            ArgumentMentionEntry: (request, response, node) => {\n                let htmlId = $.getHtmlId(response, \"argument\", node.title, true);\n                let classes = \"mention argument-mention\";\n                const argument = response.arguments[node.title];\n                if (argument.tags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, argument.sortedTags);\n                }\n                response.html +=\n                    \"<a href='#\" +\n                    htmlId +\n                    \"' class='\" +\n                    classes +\n                    \"'>@&lt;<span class='title argument-title'>\" +\n                    $.escapeHtml(node.title) +\n                    \"</span>&gt;</a>\" +\n                    node.trailingWhitespace;\n            },\n            argumentDefinitionExit: (request, response) => (response.html += \"</span></div>\"),\n            incomingSupportEntry: (request, response) => {\n                response.html +=\n                    \"<div class='incoming support relation'><div class='incoming support relation-symbol'><span>+&gt;</span></div>\";\n            },\n            incomingSupportExit: (request, response) => (response.html += \"</div>\"),\n            incomingAttackEntry: (request, response) => {\n                response.html +=\n                    \"<div class='incoming attack relation'><div class='incoming attack relation-symbol'><span>-&gt;</span></div>\";\n            },\n            incomingAttackExit: (request, response) => (response.html += \"</div>\"),\n            incomingUndercutEntry: (request, response) => {\n                response.html +=\n                    \"<div class='incoming undercut relation'><div class='incoming undercut relation-symbol'><span>_&gt;</span></div>\";\n            },\n            incomingUndercutExit: (request, response) => (response.html += \"</div>\"),\n            outgoingSupportEntry: (request, response) => {\n                response.html +=\n                    \"<div class='outgoing support relation'><div class='outgoing support relation-symbol'><span>+</span></div>\";\n            },\n            outgoingSupportExit: (request, response) => {\n                response.html += \"</div>\";\n            },\n            outgoingAttackEntry: (request, response) => {\n                response.html +=\n                    \"<div class='outgoing attack relation'><div class='outgoing attack relation-symbol'><span>-</span></div>\";\n            },\n            outgoingAttackExit: (request, response) => {\n                response.html += \"</div>\";\n            },\n            outgoingUndercutEntry: (request, response) => {\n                response.html +=\n                    \"<div class='outgoing undercut relation'><div class='outgoing undercut relation-symbol'><span>&lt;_</span></div>\";\n            },\n            outgoingUndercutExit: (request, response) => {\n                response.html += \"</div>\";\n            },\n            contradictionEntry: (request, response) => {\n                response.html +=\n                    \"<div class='contradiction relation'><div class='contradiction relation-symbol'><span>&gt;&lt;</span></div>\";\n            },\n            contradictionExit: (request, response) => {\n                response.html += \"</div>\";\n            },\n            relationsEntry: (request, response) => {\n                response.html += \"<div class='relations'>\";\n            },\n            relationsExit: (request, response) => {\n                response.html += \"</div>\";\n            },\n            orderedListEntry: (request, response) => (response.html += \"<ol>\"),\n            orderedListExit: (request, response) => (response.html += \"</ol>\"),\n            unorderedListEntry: (request, response) => (response.html += \"<ul>\"),\n            unorderedListExit: (request, response) => (response.html += \"</ul>\"),\n            orderedListItemEntry: (request, response) => (response.html += \"<li>\"),\n            orderedListItemExit: (request, response) => (response.html += \"</li>\"),\n            unorderedListItemEntry: (request, response) => (response.html += \"<li>\"),\n            unorderedListItemExit: (request, response) => (response.html += \"</li>\"),\n            headingEntry: (request, response, node) => {\n                let settings = $.getSettings(request);\n                if (node.level == 1) {\n                    if (settings.title == \"Argdown Document\") {\n                        response.html = response.html.replace(\n                            \"<title>Argdown Document</title>\",\n                            \"<title>\" + $.escapeHtml(node.text) + \"</title>\"\n                        );\n                    }\n                }\n                let htmlId = $.getHtmlId(response, \"heading\", node.text);\n                response.htmlIds[htmlId] = node;\n                response.html += \"<h\" + node.level + \" id='\" + htmlId + \"'>\";\n            },\n            headingExit: (request, response, node) => (response.html += \"</h\" + node.level + \">\"),\n            freestyleTextEntry: (request, response, node, parentNode) => {\n                if (parentNode.name != \"inferenceRules\" && parentNode.name != \"metadataStatement\") {\n                    response.html += $.escapeHtml(node.text);\n                }\n            },\n            boldEntry: (request, response) => (response.html += \"<b>\"),\n            boldExit: (request, response, node) => (response.html += \"</b>\" + node.trailingWhitespace),\n            italicEntry: (request, response) => (response.html += \"<i>\"),\n            italicExit: (request, response, node) => (response.html += \"</i>\" + node.trailingWhitespace),\n            LinkEntry: (request, response, node) =>\n                (response.html += \"<a href='\" + node.url + \"'>\" + node.text + \"</a>\" + node.trailingWhitespace),\n            TagEntry: (request, response, node) => {\n                if (node.text) {\n                    response.html +=\n                        \"<span class='tag \" +\n                        $.getCssClassesFromTags(response, [node.tag]) +\n                        \"'>\" +\n                        $.escapeHtml(node.text) +\n                        \"</span>\";\n                }\n            },\n            argumentEntry: (request, response, node) => {\n                let classes = \"argument\";\n                if (node.argument.tags) {\n                    classes += \" \" + $.getCssClassesFromTags(response, node.argument.sortedTags);\n                }\n                response.html += \"<div class='\" + classes + \"'>\";\n            },\n            argumentExit: (request, response) => (response.html += \"</div>\"),\n            argumentStatementEntry: (request, response, node) => {\n                if (node.statement.role == \"conclusion\") {\n                    let inference = node.statement.inference;\n                    let metadataKeys = Object.keys(inference.metaData);\n                    if (metadataKeys.length == 0 && inference.inferenceRules.length == 0) {\n                        response.html += \"<div class='inference'>\";\n                    } else {\n                        response.html += \"<div class='inference with-data'>\";\n                    }\n\n                    response.html += \"<span class='inference-rules'>\";\n                    if (inference.inferenceRules.length > 0) {\n                        let i = 0;\n                        for (let inferenceRule of inference.inferenceRules) {\n                            if (i > 0) response.html += \", \";\n                            response.html += \"<span class='inference-rule'>\" + inferenceRule + \"</span>\";\n                            i++;\n                        }\n                        response.html += \"</span> \";\n                    }\n                    if (metadataKeys.length > 0) {\n                        response.html += \"<span class='metadata'>(\";\n                        for (let i = 0; i < metadataKeys.length; i++) {\n                            let key = metadataKeys[i];\n                            response.html += \"<span class='meta-data-statement'>\";\n                            response.html += \"<span class='meta-data-key'>\" + key + \": </span>\";\n                            if (_.isString(inference.metaData[key])) {\n                                response.html +=\n                                    \"<span class='meta-data-value'>\" +\n                                    $.escapeHtml(inference.metaData[key]) +\n                                    \"</span>\";\n                            } else {\n                                let j = 0;\n                                for (let value of inference.metaData[key]) {\n                                    if (j > 0) response.html += \", \";\n                                    response.html += \"<span class='meta-data-value'>\" + $.escapeHtml(value) + \"</span>\";\n                                    j++;\n                                }\n                            }\n                            if (i < metadataKeys.length - 1) response.html += \"; \";\n                            response.html += \"</span>\";\n                        }\n                        response.html += \" )</span>\";\n                    }\n\n                    response.html += \"</div>\";\n                }\n                response.html +=\n                    \"<div class='\" +\n                    node.statement.role +\n                    \" argument-statement'><div class='statement-nr'>(<span>\" +\n                    node.statementNr +\n                    \"</span>)</div>\";\n            },\n            argumentStatementExit: (request, response) => (response.html += \"</div>\")\n        };\n    }\n    getHtmlId(response, type, title, ignoreDuplicates) {\n        let id = type + \"-\" + title;\n        id = util.getHtmlId(id);\n        if (!ignoreDuplicates) {\n            let originalId = id;\n            let i = 1;\n            while (response.htmlIds && response.htmlIds[id]) {\n                i++;\n                id = originalId + \"-occurrence-\" + i;\n            }\n        }\n        return id;\n    }\n    getCssClassesFromTags(response, tags) {\n        let classes = \"\";\n        if (!tags || !response.tagsDictionary) {\n            return classes;\n        }\n        let index = 0;\n        for (let tag of tags) {\n            if (index > 0) {\n                classes += \" \";\n            }\n            index++;\n            const tagData = response.tagsDictionary[tag];\n            classes += tagData.cssClass;\n        }\n        return classes;\n    }\n    replaceAll(str, find, replace) {\n        return str.replace(new RegExp(find, \"g\"), replace);\n    }\n    escapeHtml(unsafe) {\n        return unsafe\n            .replace(/&/g, \"&amp;\")\n            .replace(/</g, \"&lt;\")\n            .replace(/>/g, \"&gt;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&#039;\");\n    }\n    escapeRegExp(str) {\n        return str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n    }\n}\nmodule.exports = {\n    HtmlExport: HtmlExport\n};\n"]}