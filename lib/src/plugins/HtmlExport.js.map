{"version":3,"sources":["../../../src/plugins/HtmlExport.js"],"names":["_","HtmlExport","result","html","config","settings","defaults","headless","cssFile","title","lang","charset","head","name","$","argdownListeners","argdownEntry","argdownExit","statementEntry","statementExit","StatementDefinitionEntry","node","statement","StatementReferenceEntry","StatementMentionEntry","trailingWhitespace","argumentReferenceEntry","argument","argumentDefinitionEntry","ArgumentMentionEntry","argumentDefinitionExit","incomingSupportEntry","incomingSupportExit","incomingAttackEntry","incomingAttackExit","outgoingSupportEntry","outgoingSupportExit","outgoingAttackEntry","outgoingAttackExit","relationsEntry","relationsExit","orderedListEntry","orderedListExit","unorderedListEntry","unorderedListExit","orderedListItemEntry","orderedListItemExit","unorderedListItemEntry","unorderedListItemExit","headingEntry","heading","replace","text","headingExit","freestyleTextEntry","parentNode","boldEntry","boldExit","italicEntry","italicExit","LinkEntry","url","argumentEntry","argumentExit","argumentStatementEntry","role","inference","metadataKeys","Object","keys","metaData","length","inferenceRules","i","inferenceRule","key","isString","j","value","statementNr","argumentStatementExit","module","exports"],"mappings":"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","file":"HtmlExport.js","sourcesContent":["import * as _ from 'lodash';\n\nclass HtmlExport{\n  set config(config){\n    this.settings = _.defaults(config ||{}, {\n      headless : false,\n      cssFile: './argdown.css',\n      title: 'Argdown Document',\n      lang: 'en',\n      charset: 'utf8'\n    });\n\n    this.head = \"<!doctype html>\\n\\n\"+\n        \"<html lang='\"+this.settings.lang+\"'>\\n\"+\n        \"<head>\\n\"+\n        \"<meta charset='\"+this.settings.charset+\"'>\\n\"+\n        \"<title>\"+this.settings.title+\"</title>\\n\";\n        if(this.settings.cssFile){\n            this.head += \"<link rel='stylesheet' href='\"+this.settings.cssFile+\"'>\\n\";\n        }\n        this.head += \"</head>\";\n  }\n  run(result){\n    result.html = this.html;\n    return result;\n  }\n  constructor(config){\n    this.name = \"HtmlExport\";\n    this.html = \"\";\n    let $ = this;\n    this.config = config;\n\n    this.argdownListeners = {\n      argdownEntry : ()=>{\n        if(!$.settings.headless){\n          $.html = \"\";\n          $.html += $.head;\n          $.html += \"<body>\";\n        }\n        $.html += \"<div class='argdown'>\";\n      },\n      argdownExit : ()=>{\n        if(!$.settings.headless){\n          $.html += \"</body></html>\";\n        }\n      },\n      statementEntry : ()=>$.html += \"<div class='statement'>\",\n      statementExit : ()=>$.html += \"</div>\",\n      StatementDefinitionEntry : (node)=>{\n        $.html += \"<span class='definition statement-definition definiendum'>[<span class='title statement-title'>\"+node.statement.title+\"</span>]: </span>\"\n      },\n      StatementReferenceEntry : (node)=>{\n        $.html += \"<span class='reference statement-reference'>[<span class='title statement-title'>\"+node.statement.title+\"</span>] </span>\"\n      },\n      StatementMentionEntry : (node)=>{\n        $.html += \"<span class='mention statement-mention'>@[<span class='title statement-title'>\"+node.title+\"</span>]</span>\"+node.trailingWhitespace\n      },\n      argumentReferenceEntry : (node)=>{\n        $.html += \"<div class='argument-reference'>&lt;<span class='title argument-title'>\"+node.argument.title+\"</span>&gt; </div>\"\n      },\n      argumentDefinitionEntry : (node)=>{\n        $.html += \"<div class='argument-definition'><span class='definiendum argument-definiendum'>&lt;<span class='title argument-title'>\"+node.argument.title+\"</span>&gt;: </span><span class='argument-definiens definiens description'>\"\n      },\n      ArgumentMentionEntry : (node)=>{\n        $.html += \"<span class='mention argument-mention'>@&lt;<span class='title argument-title'>\"+node.title+\"</span>&gt;</span>\"+node.trailingWhitespace\n      },\n      argumentDefinitionExit : ()=>$.html+=\"</span></div>\",\n      incomingSupportEntry : ()=>{\n        $.html += \"<div class='incoming support relation'><div class='incoming support relation-symbol'><span>+&gt;</span></div>\"\n      },\n      incomingSupportExit : ()=>$.html += \"</div>\",\n      incomingAttackEntry : ()=>{\n        $.html += \"<div class='incoming attack relation'><div class='incoming attack relation-symbol'><span>-&gt;</span></div>\"\n      },\n      incomingAttackExit : ()=>$.html += \"</div>\",\n      outgoingSupportEntry : ()=>{\n        $.html += \"<div class='outgoing support relation'><div class='outgoing support relation-symbol'><span>+</span></div>\"\n      },\n      outgoingSupportExit : ()=>{\n        $.html += \"</div>\"\n      },\n      outgoingAttackEntry : ()=>{\n        $.html += \"<div class='outgoing attack relation'><div class='outgoing attack relation-symbol'><span>-</span></div>\"\n      },\n      outgoingAttackExit : ()=>{\n        $.html += \"</div>\"\n      },\n      relationsEntry : ()=>{\n        $.html += \"<div class='relations'>\";\n      },\n      relationsExit : ()=>{\n        $.html += \"</div>\";\n      },\n      orderedListEntry : ()=>$.html += \"<ol>\",\n      orderedListExit : ()=>$.html += \"</ol>\",\n      unorderedListEntry : ()=>$.html += \"<ul>\",\n      unorderedListExit : ()=>$.html += \"</ul>\",\n      orderedListItemEntry : ()=>$.html += \"<li>\",\n      orderedListItemExit : ()=>$.html += \"</li>\",\n      unorderedListItemEntry : ()=>$.html += \"<li>\",\n      unorderedListItemExit : ()=>$.html += \"</li>\",\n      headingEntry : (node)=>{\n        if(node.heading == 1){\n          if($.settings.title == 'Argdown Document'){\n            $.html = $.html.replace('<title>Argdown Document</title>','<title>'+node.text+'</title>')\n          }\n        }\n        $.html += \"<h\"+node.heading+\">\"\n      },\n      headingExit : (node)=>$.html += \"</h\"+node.heading+\">\",\n      freestyleTextEntry : (node, parentNode)=>{\n        if(parentNode.name != 'inferenceRules' && parentNode.name != 'metadataStatement')\n          $.html += node.text\n      },\n      boldEntry : ()=>$.html += \"<b>\",\n      boldExit : (node)=>$.html += \"</b>\"+node.trailingWhitespace,\n      italicEntry : ()=>$.html += \"<i>\",\n      italicExit : (node)=>$.html += \"</i>\"+node.trailingWhitespace,\n      LinkEntry : (node)=>$.html += \"<a href='\"+node.url+\"'>\"+node.text+\"</a>\"+node.trailingWhitespace,\n      argumentEntry : ()=>$.html += \"<div class='argument'>\",\n      argumentExit : ()=>$.html += \"</div>\",\n      argumentStatementEntry : (node)=>{\n        if(node.statement.role == 'conclusion'){\n          let inference = node.statement.inference;\n          let metadataKeys = Object.keys(inference.metaData);\n          if(metadataKeys.length == 0 && inference.inferenceRules.length == 0){\n            $.html += \"<div class='inference'>\";\n          }else{\n            $.html += \"<div class='inference with-data'>\";\n          }\n\n          $.html += \"<span class='inference-rules'>\"\n          if(inference.inferenceRules.length > 0){\n            let i = 0;\n            for(let inferenceRule of inference.inferenceRules){\n              if(i > 0)\n                $.html += \", \";\n              $.html += \"<span class='inference-rule'>\"+inferenceRule+\"</span>\";\n              i++;\n            }\n            $.html += \"</span> \";\n          }\n          if(metadataKeys.length > 0){\n            $.html += \"<span class='metadata'>(\";\n            for(let i = 0; i < metadataKeys.length; i++){\n              let key = metadataKeys[i];\n              $.html += \"<span class='meta-data-statement'>\";\n              $.html += \"<span class='meta-data-key'>\"+key+\": </span>\";\n              if(_.isString(inference.metaData[key])){\n                $.html += \"<span class='meta-data-value'>\"+inference.metaData[key]+\"</span>\";\n              }else{\n                let j = 0;\n                for(let value of inference.metaData[key]){\n                  if(j > 0)\n                    $.html += \", \";\n                  $.html += \"<span class='meta-data-value'>\"+value+\"</span>\";\n                  j++;\n                }\n              }\n              if(i < metadataKeys.length - 1)\n                $.html  += \"; \";\n              $.html += \"</span>\";\n            }\n            $.html += \" )</span>\";\n          }\n\n          $.html += \"</div>\";\n        }\n        $.html += \"<div class='\"+node.statement.role+\" argument-statement'><div class='statement-nr'>(<span>\"+node.statementNr+\"</span>)</div>\"\n      },\n      argumentStatementExit : ()=>$.html += \"</div>\"\n    }\n  }\n}\nmodule.exports = {\n  HtmlExport: HtmlExport\n}\n"]}